<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports"
              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd"
              name="Pagina1" pageWidth="595" pageHeight="842" columnWidth="555"
              leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20"
              uuid="4a50bba0-757e-44b1-a9b6-15d29fe3fb7d">

    <property name="com.jaspersoft.studio.data.defaultdataadapter" value="MySQL2025"/>
    <property name="com.jaspersoft.studio.data.sql.tables"><![CDATA[YFByb21vY2lvbmAgQVMgLDc4OCwxNSxlNDJlOGM4ZC1hNmZhLTQ4OGEtYWVmNS1lZWY1NDI4NTY5NDM7YENsaWVudGVzYQ==]]></property>

    <parameter name="id" class="java.lang.Integer"/>
    <parameter name="LOGO" class="java.io.InputStream"/>

    <queryString>
        <![CDATA[
SELECT DISTINCT
    CONCAT(c.first_name, ' ', c.last_name) AS clientName,
    c.ruc AS ruc,
    c.dni AS dni,
    CONCAT(c.first_name, c.last_name, "@gmail.com") AS clientEmail,
    c.phone AS clientPhone,
    cron.installation_location AS installationLocation,
    r.id AS recordId,
    pl.description AS plan,
    pro.description AS promotion
FROM ruc10_records AS r
JOIN clients AS c ON c.dni = r.client_dni
JOIN secondary_contacts AS sc ON sc.id = r.secondary_contact_id
JOIN schedules AS cron ON cron.id = r.schedule_id
JOIN plans AS pl ON pl.id = r.plan_id
LEFT JOIN promotions AS pro ON pro.id = r.promotion_id
WHERE r.id = $P{id}
]]>
    </queryString>

    <field name="clientName" class="java.lang.String">
        <property name="com.jaspersoft.studio.field.name" value="clientName"/>
        <property name="com.jaspersoft.studio.field.label" value="clientName"/>
    </field>

    <field name="ruc" class="java.lang.String">
        <property name="com.jaspersoft.studio.field.name" value="ruc"/>
        <property name="com.jaspersoft.studio.field.label" value="ruc"/>
        <property name="com.jaspersoft.studio.field.tree.path" value="client"/>
    </field>

    <field name="dni" class="java.lang.String">
        <property name="com.jaspersoft.studio.field.name" value="dni"/>
        <property name="com.jaspersoft.studio.field.label" value="dni"/>
        <property name="com.jaspersoft.studio.field.tree.path" value="client"/>
    </field>

    <field name="clientEmail" class="java.lang.String">
        <property name="com.jaspersoft.studio.field.name" value="clientEmail"/>
        <property name="com.jaspersoft.studio.field.label" value="clientEmail"/>
    </field>

    <field name="clientPhone" class="java.lang.String">
        <property name="com.jaspersoft.studio.field.name" value="clientPhone"/>
        <property name="com.jaspersoft.studio.field.label" value="clientPhone"/>
        <property name="com.jaspersoft.studio.field.tree.path" value="client"/>
    </field>

    <field name="installationLocation" class="java.lang.String">
        <property name="com.jaspersoft.studio.field.name" value="installationLocation"/>
        <property name="com.jaspersoft.studio.field.label" value="installationLocation"/>
        <property name="com.jaspersoft.studio.field.tree.path" value="schedule"/>
    </field>

    <field name="recordId" class="java.lang.Integer">
        <property name="com.jaspersoft.studio.field.name" value="recordId"/>
        <property name="com.jaspersoft.studio.field.label" value="recordId"/>
        <property name="com.jaspersoft.studio.field.tree.path" value="ruc10_record"/>
    </field>

    <field name="plan" class="java.lang.String">
        <property name="com.jaspersoft.studio.field.name" value="plan"/>
        <property name="com.jaspersoft.studio.field.label" value="plan"/>
        <property name="com.jaspersoft.studio.field.tree.path" value="plan"/>
    </field>

    <field name="promotion" class="java.lang.String">
        <property name="com.jaspersoft.studio.field.name" value="promotion"/>
        <property name="com.jaspersoft.studio.field.label" value="promotion"/>
        <property name="com.jaspersoft.studio.field.tree.path" value="promotion"/>
    </field>

    <background>
        <band height="802" splitType="Stretch">
            <image>
                <reportElement x="0" y="0" width="560" height="791" uuid="69bb6f55-d496-40b2-954f-07d083f7833f"/>
                <imageExpression><![CDATA[$P{LOGO}]]></imageExpression>
            </image>

            <textField>
                <reportElement x="20" y="230" width="150" height="19" uuid="79f592d3-d4ce-4992-905e-251bb481f26b">
                    <property name="com.jaspersoft.studio.spreadsheet.connectionID" value="dd760465-6826-4890-a87d-8ebccf2ed0fa"/>
                </reportElement>
                <textElement textAlignment="Left" verticalAlignment="Middle">
                    <font size="10"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{clientName}]]></textFieldExpression>
            </textField>

            <textField>
                <reportElement x="160" y="351" width="80" height="19" uuid="36ce31f8-3c9e-464d-b6ba-14d3d26e53a6">
                    <property name="com.jaspersoft.studio.spreadsheet.connectionID" value="b77c376f-0a8c-4065-b46b-1ad795ea2713"/>
                </reportElement>
                <textElement textAlignment="Left" verticalAlignment="Middle">
                    <font size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{dni}]]></textFieldExpression>
            </textField>

            <textField>
                <reportElement x="20" y="392" width="140" height="19" uuid="7142c8b1-1ae4-4aec-b0b0-094935e93fe2">
                    <property name="com.jaspersoft.studio.spreadsheet.connectionID" value="3d17e254-a61d-44ac-9230-a5cdf3c5dd5b"/>
                </reportElement>
                <textElement textAlignment="Left" verticalAlignment="Middle">
                    <font size="12"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{clientEmail}]]></textFieldExpression>
            </textField>

            <textField>
                <reportElement x="40" y="260" width="80" height="20" uuid="47628f7c-ffa5-4184-822b-2bc8818741e1">
                    <property name="com.jaspersoft.studio.spreadsheet.connectionID" value="65044205-39ec-4c94-ba33-6f4f0ba2f8c5"/>
                </reportElement>
                <textElement textAlignment="Left" verticalAlignment="Middle">
                    <font size="12"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{ruc}]]></textFieldExpression>
            </textField>

            <textField>
                <reportElement x="20" y="420" width="121" height="19" uuid="7e637c68-d1e2-4216-b26f-1e85573b974c">
                    <property name="com.jaspersoft.studio.spreadsheet.connectionID" value="697f71e8-67c1-41b9-b7c3-d17edbf626c8"/>
                </reportElement>
                <textElement textAlignment="Left" verticalAlignment="Middle">
                    <font size="12"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{clientPhone}]]></textFieldExpression>
            </textField>

            <textField>
                <reportElement x="130" y="590" width="220" height="19" uuid="96dbc2b1-f3db-44ff-9a95-1c7829428cff">
                    <property name="com.jaspersoft.studio.spreadsheet.connectionID" value="75a5bce9-1982-410f-85e4-fe41fe5a82cc"/>
                </reportElement>
                <textElement textAlignment="Left" verticalAlignment="Middle">
                    <font size="10"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{promotion}]]></textFieldExpression>
            </textField>

            <textField>
                <reportElement x="281" y="95" width="61" height="19" uuid="35bbedac-7f36-47f1-866f-06eaafb97b38">
                    <property name="com.jaspersoft.studio.spreadsheet.connectionID" value="3b4ed4a7-65c5-4101-ac63-b69a6c0b8cde"/>
                </reportElement>
                <textElement textAlignment="Left" verticalAlignment="Middle">
                    <font size="12"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{recordId}]]></textFieldExpression>
            </textField>

            <textField>
                <reportElement x="20" y="460" width="270" height="19" uuid="e6ee21b5-a4b8-42f2-887b-ec9523aa48ca">
                    <property name="com.jaspersoft.studio.spreadsheet.connectionID" value="7e6db2b2-fca4-448d-bf24-f6ac8b790ac9"/>
                </reportElement>
                <textElement textAlignment="Left" verticalAlignment="Middle">
                    <font size="13"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{installationLocation}]]></textFieldExpression>
            </textField>

            <textField>
                <reportElement x="130" y="570" width="180" height="19" uuid="dc218303-aafb-4a9a-a3a2-79b36739c3dc">
                    <property name="com.jaspersoft.studio.spreadsheet.connectionID" value="e959ea45-fd04-4246-902a-84b29d853be7"/>
                </reportElement>
                <textElement textAlignment="Left" verticalAlignment="Middle">
                    <font size="10"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{plan}]]></textFieldExpression>
            </textField>

            <textField>
                <reportElement x="20" y="360" width="150" height="19" uuid="a8ddb77a-0468-4ed5-8d24-f6761bd55c02">
                    <property name="com.jaspersoft.studio.spreadsheet.connectionID" value="dd760465-6826-4890-a87d-8ebccf2ed0fa"/>
                </reportElement>
                <textElement textAlignment="Left" verticalAlignment="Middle">
                    <font size="12"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{clientName}]]></textFieldExpression>
            </textField>

            <textField>
                <reportElement x="20" y="320" width="150" height="19" uuid="c5068deb-5798-40ca-9875-11fce02a8311">
                    <property name="com.jaspersoft.studio.spreadsheet.connectionID" value="dd760465-6826-4890-a87d-8ebccf2ed0fa"/>
                </reportElement>
                <textElement textAlignment="Left" verticalAlignment="Middle">
                    <font size="12"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{clientName}]]></textFieldExpression>
            </textField>

            <textField>
                <reportElement x="20" y="500" width="260" height="19" uuid="4837cf28-e454-435f-9816-60ed99b4229a">
                    <property name="com.jaspersoft.studio.spreadsheet.connectionID" value="7e6db2b2-fca4-448d-bf24-f6ac8b790ac9"/>
                </reportElement>
                <textElement textAlignment="Left" verticalAlignment="Middle">
                    <font size="13"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{installationLocation}]]></textFieldExpression>
            </textField>

            <textField>
                <reportElement x="100" y="560" width="170" height="19" uuid="327cba3a-a5b8-4ab9-a4f0-d23516868684">
                    <property name="com.jaspersoft.studio.spreadsheet.connectionID" value="b77c376f-0a8c-4065-b46b-1ad795ea2713"/>
                </reportElement>
                <textElement textAlignment="Left" verticalAlignment="Middle">
                    <font size="10"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{dni}]]></textFieldExpression>
            </textField>

        </band>
    </background>

    <title>
        <band height="79" splitType="Stretch"/>
    </title>
    <pageHeader>
        <band height="35" splitType="Stretch"/>
    </pageHeader>
    <columnHeader>
        <band height="61" splitType="Stretch"/>
    </columnHeader>
    <detail>
        <band height="95" splitType="Stretch"/>
        <band height="50"/>
    </detail>
    <columnFooter>
        <band height="54" splitType="Stretch"/>
    </columnFooter>
    <pageFooter>
        <band height="54" splitType="Stretch"/>
    </pageFooter>
    <summary>
        <band height="42" splitType="Stretch"/>
    </summary>
</jasperReport>
